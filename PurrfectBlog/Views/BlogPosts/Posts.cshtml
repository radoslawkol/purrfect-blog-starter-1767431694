@model IEnumerable<PurrfectBlog.Models.BlogPost>

@{
    ViewBag.Title = "Posts";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="d-flex justify-content-between align-items-center">
    <h2>Posts</h2>
    @Html.ActionLink("Create Post", "CreatePost", "BlogPosts", null, new { @class = "btn btn-primary btn-md" })
</div>

@foreach (var post in Model)
{
    <article>
        <h3>
            @Html.ActionLink(post.Title, "Details", "BlogPosts", new { id = post.Id }, null)
        </h3>

        <small>
            @post.CreatedAt.ToLocalTime().ToString("MMM dd, yyyy")
            @if (!string.IsNullOrEmpty(post.Category))
            {
                <span> | @post.Category</span>
            }
        </small>

        <p>
            @(post.Content.Length > 150
                ? post.Content.Substring(0, 150) + "..."
                : post.Content)
        </p>

        @Html.ActionLink("Read more", "Details", "BlogPosts", new { id = post.Id }, null)
    </article>
    <hr />
}
